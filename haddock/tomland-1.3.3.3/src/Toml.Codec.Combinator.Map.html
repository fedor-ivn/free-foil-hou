<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ApplicativeDo   #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE CPP             #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TupleSections   #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="annot"><span class="hs-comment">{- |
Module                  : Toml.Codec.Combinator.Map
Copyright               : (c) 2018-2022 Kowainik
SPDX-License-Identifier : MPL-2.0
Maintainer              : Kowainik &lt;xrom.xkov@gmail.com&gt;
Stability               : Stable
Portability             : Portable

TOML-specific combinators for converting between TOML and Haskell Map-like data
types.

There are two way to represent map-like structures with the @tomland@ library.

* Map structure with the key and value represented as key-value pairs:

    @
    foo =
        [ {myKey = &quot;name&quot;, myVal = 42}
        , {myKey = &quot;otherName&quot;, myVal = 100}
        ]
    @

* Map structure as a table with the @TOML@ key as the map key:

    @
    [foo]
        name = 42
        otherName = 100
    @

You can find both types of the codecs in this module for different map-like
structures. See the following table for the heads up:

+------------------------------+--------------------------------+----------------------------------------------------+
|         Haskell Type         |             @TOML@             |                    'TomlCodec'                     |
+==============================+================================+====================================================+
| __@'Map' 'Int' 'Text'@__     | @x = [{k = 42, v = &quot;foo&quot;}]@    | @'map' ('Toml.int' &quot;k&quot;) ('Toml.text' &quot;v&quot;) &quot;x&quot;@     |
+------------------------------+--------------------------------+----------------------------------------------------+
| __@'Map' 'Text' 'Int'@__     | @x = {a = 42, b = 11}@         | @'tableMap' 'Toml._KeyText' 'Toml.int' &quot;x&quot;@        |
+------------------------------+--------------------------------+----------------------------------------------------+
| __@'HashMap' 'Int' 'Text'@__ | @x = [{k = 42, v = &quot;foo&quot;}]@    | @'hashMap' ('Toml.int' &quot;k&quot;) ('Toml.text' &quot;v&quot;) &quot;x&quot;@ |
+------------------------------+--------------------------------+----------------------------------------------------+
| __@'HashMap' 'Text' 'Int'@__ | @x = {a = 42, b = 11}@         | @'tableHashMap' 'Toml._KeyText' 'Toml.int' &quot;x&quot;@    |
+------------------------------+--------------------------------+----------------------------------------------------+
| __@'IntMap' 'Text'@__        | @x = [{k = 42, v = &quot;foo&quot;}]@    | @'intMap' ('Toml.int' &quot;k&quot;) ('Toml.text' &quot;v&quot;) &quot;x&quot;@  |
+------------------------------+--------------------------------+----------------------------------------------------+
| __@'IntMap' 'Text'@__        | @x = {1 = &quot;one&quot;, 2 = &quot;two&quot;}@   | @'tableIntMap' 'Toml._KeyInt' 'Toml.text' &quot;x&quot;@     |
+------------------------------+--------------------------------+----------------------------------------------------+

__Note:__ in case of the missing key on the @TOML@ side an empty map structure
is returned.

@since 1.3.0.0
-}</span></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Toml.Codec.Combinator.Map</span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * 'Map' codecs</span></span><span>
</span><span id="line-63"></span><span>      </span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#map"><span class="hs-identifier">map</span></a></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#tableMap"><span class="hs-identifier">tableMap</span></a></span><span>
</span><span id="line-65"></span><span>      </span><span class="annot"><span class="hs-comment">-- * 'HashMap' codecs</span></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#hashMap"><span class="hs-identifier">hashMap</span></a></span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#tableHashMap"><span class="hs-identifier">tableHashMap</span></a></span><span>
</span><span id="line-68"></span><span>      </span><span class="annot"><span class="hs-comment">-- * 'IntMap' codecs</span></span><span>
</span><span id="line-69"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#intMap"><span class="hs-identifier">intMap</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#tableIntMap"><span class="hs-identifier">tableIntMap</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">map</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">empty</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">forM_</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">gets</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modify</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HashMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Hashable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Hashable</span></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">for</span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Validation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Validation</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Toml.Codec.BiMap.html"><span class="hs-identifier">Toml.Codec.BiMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Codec.BiMap.html#BiMap"><span class="hs-identifier">BiMap</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.BiMap.html#TomlBiMap"><span class="hs-identifier">TomlBiMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Toml.Codec.Code.html"><span class="hs-identifier">Toml.Codec.Code</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Codec.Code.html#execTomlCodec"><span class="hs-identifier">execTomlCodec</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Toml.Codec.Combinator.Common.html"><span class="hs-identifier">Toml.Codec.Combinator.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Codec.Combinator.Common.html#whenLeftBiMapError"><span class="hs-identifier">whenLeftBiMapError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html"><span class="hs-identifier">Toml.Codec.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Codec.Types.html#Codec"><span class="hs-identifier">Codec</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier">TomlCodec</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlEnv"><span class="hs-identifier">TomlEnv</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlState"><span class="hs-identifier">TomlState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Toml.Type.Key.html"><span class="hs-identifier">Toml.Type.Key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier">Key</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#%3A%7C%7C"><span class="hs-operator">(:||)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Toml.Type.TOML.html"><span class="hs-identifier">Toml.Type.TOML</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Type.TOML.html#TOML"><span class="hs-identifier">TOML</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Type.TOML.html#insertTable"><span class="hs-identifier">insertTable</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Toml.Type.TOML.html#insertTableArrays"><span class="hs-identifier">insertTableArrays</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntMap</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Toml.Type.PrefixTree.html"><span class="hs-identifier">Toml.Type.PrefixTree</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Prefix</span></span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="annot"><span class="hs-comment">{- | Bidirectional codec for 'Map'. It takes birectional converter for keys and
values and produces bidirectional codec for 'Map'. Currently it works only with array
of tables, so you need to specify 'Map's in TOML files like this:

@
myMap =
    [ { name = &quot;foo&quot;, payload = 42 }
    , { name = &quot;bar&quot;, payload = 69 }
    ]
@

'TomlCodec' for such TOML field can look like this:

@
Toml.'map' (Toml.'text' &quot;name&quot;) (Toml.'int' &quot;payload&quot;) &quot;myMap&quot;
@

If there's no key with the name @&quot;myMap&quot;@ then empty 'Map' is returned.

@since 1.2.1.0
-}</span></span><span>
</span><span id="line-123"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#map"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108352"><span class="annot"><a href="#local-6989586621679108352"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679108354"><span class="annot"><a href="#local-6989586621679108354"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span class="hs-operator">.</span><span>
</span><span id="line-124"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679108352"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108352"><span class="hs-identifier hs-type">k</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'Map' keys</span></span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108354"><span class="hs-identifier hs-type">v</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'Map' values</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ TOML key where 'Map' is stored</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679108352"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108354"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for the 'Map'</span></span><span>
</span><span id="line-129"></span><span id="map"><span class="annot"><span class="annottext">map :: forall k v.
Ord k =&gt;
TomlCodec k -&gt; TomlCodec v -&gt; Key -&gt; TomlCodec (Map k v)
</span><a href="Toml.Codec.Combinator.Map.html#map"><span class="hs-identifier hs-var hs-var">map</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k v
-&gt; (Map k v -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; Map k v)
-&gt; TomlCodec k
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec (Map k v)
forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlCodec k
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalMap"><span class="hs-identifier hs-var">internalMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; Map k v
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><span class="hs-comment">{- | This 'TomlCodec' helps you to convert TOML key-value pairs
directly to 'Map' using TOML keys as 'Map' keys. It can be convenient
if your 'Map' keys are types like 'Text' or 'Int' and you want to work with raw
TOML keys directly.

For example, if you have TOML like this:

@
[colours]
yellow = &quot;#FFFF00&quot;
red    = { red = 255, green = 0, blue = 0 }
pink   = &quot;#FFC0CB&quot;
@

You want to convert such TOML configuration into the following Haskell
types:


@
__data__ Rgb = Rgb
    { rgbRed   :: Int
    , rgbGreen :: Int
    , rgbBlue  :: Int
    }

__data__ Colour
    = Hex Text
    | RGB Rgb

colourCodec :: 'TomlCodec' Colour
colourCodec = ...

__data__ ColourConfig = ColourConfig
    { configColours :: 'Map' 'Text' Colour
    }
@

And you want in the result to have a 'Map' like this:

@
'Map.fromList'
    [ &quot;yellow&quot; -&gt; Hex &quot;#FFFF00&quot;
    , &quot;pink&quot;   -&gt; Hex &quot;#FFC0CB&quot;
    , &quot;red&quot;    -&gt; Rgb 255 0 0
    ]
@

You can use 'tableMap' to define 'TomlCodec' in the following way:

@
colourConfigCodec :: 'TomlCodec' ColourConfig
colourConfigCodec = ColourConfig
    \&lt;$\&gt; Toml.'tableMap' Toml._KeyText colourCodec &quot;colours&quot; .= configColours
@

__Hint:__ You can use 'Toml.Codec.BiMap._KeyText' or
'Toml.Codec.BiMap._KeyString' to convert betwen TOML keys and 'Map'
keys (or you can write your custom 'TomlBiMap').

__NOTE__: Unlike the 'map' codec, this codec is less flexible (i.e. it doesn't
allow to have arbitrary structures as 'Key's, it works only for
text-like keys), but can be helpful if you want to save a few
keystrokes during TOML configuration. A similar TOML configuration,
but suitable for the 'map' codec will look like this:

@
colours =
    [ { key = &quot;yellow&quot;, hex = &quot;#FFFF00&quot; }
    , { key = &quot;pink&quot;,   hex = &quot;#FFC0CB&quot; }
    , { key = &quot;red&quot;,    rgb = { red = 255, green = 0, blue = 0 } }
    ]
@

@since 1.3.0.0
-}</span></span><span>
</span><span id="line-206"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#tableMap"><span class="hs-identifier hs-type">tableMap</span></a></span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108368"><span class="annot"><a href="#local-6989586621679108368"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679108370"><span class="annot"><a href="#local-6989586621679108370"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679108368"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.BiMap.html#TomlBiMap"><span class="hs-identifier hs-type">TomlBiMap</span></a></span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108368"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Bidirectional converter between TOML 'Key's and 'Map' keys</span></span><span>
</span><span id="line-211"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108370"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'Map' values for the corresponding 'Key'</span></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Table name for 'Map'</span></span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621679108368"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108370"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span id="tableMap"><span class="annot"><span class="annottext">tableMap :: forall k v.
Ord k =&gt;
TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v) -&gt; Key -&gt; TomlCodec (Map k v)
</span><a href="Toml.Codec.Combinator.Map.html#tableMap"><span class="hs-identifier hs-var hs-var">tableMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map k v
-&gt; (Map k v -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; Map k v)
-&gt; TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec (Map k v)
forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalTableMap"><span class="hs-identifier hs-var">internalTableMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map k v
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">Map k v -&gt; [(k, v)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; Map k v
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-217"></span><span>
</span><span id="line-218"></span><span class="annot"><span class="hs-comment">{- | Bidirectional codec for 'HashMap'. It takes birectional converter for keys and
values and produces bidirectional codec for 'HashMap'. It works with array of
tables, so you need to specify 'HashMap's in TOML files like this:

@
myHashMap =
    [ { name = &quot;foo&quot;, payload = 42 }
    , { name = &quot;bar&quot;, payload = 69 }
    ]
@

'TomlCodec' for such TOML field can look like this:

@
Toml.'hashMap' (Toml.'text' &quot;name&quot;) (Toml.'int' &quot;payload&quot;) &quot;myHashMap&quot;
@

If there's no key with the name @&quot;myHashMap&quot;@ then empty 'HashMap' is returned.

@since 1.3.0.0
-}</span></span><span>
</span><span id="line-239"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#hashMap"><span class="hs-identifier hs-type">hashMap</span></a></span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108376"><span class="annot"><a href="#local-6989586621679108376"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679108378"><span class="annot"><a href="#local-6989586621679108378"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-cpp">
#if MIN_VERSION_hashable(1,4,0)
</span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679108376"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Eq</span><span> </span><span class="hs-identifier">k</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Hashable</span><span> </span><span class="hs-identifier">k</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108376"><span class="hs-identifier hs-type">k</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'HashMap' keys</span></span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108378"><span class="hs-identifier hs-type">v</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'HashMap' values</span></span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ TOML key where 'HashMap' is stored</span></span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679108376"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108378"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for the 'HashMap'</span></span><span>
</span><span id="line-250"></span><span id="hashMap"><span class="annot"><span class="annottext">hashMap :: forall k v.
Hashable k =&gt;
TomlCodec k -&gt; TomlCodec v -&gt; Key -&gt; TomlCodec (HashMap k v)
</span><a href="Toml.Codec.Combinator.Map.html#hashMap"><span class="hs-identifier hs-var hs-var">hashMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap k v
-&gt; (HashMap k v -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; HashMap k v)
-&gt; TomlCodec k
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec (HashMap k v)
forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlCodec k
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalMap"><span class="hs-identifier hs-var">internalMap</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k v
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HashMap.empty</span></span><span> </span><span class="annot"><span class="annottext">HashMap k v -&gt; [(k, v)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HashMap.toList</span></span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; HashMap k v
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HashMap.fromList</span></span><span>
</span><span id="line-251"></span><span>
</span><span id="line-252"></span><span class="annot"><span class="hs-comment">{- | This 'TomlCodec' helps to convert TOML key-value pairs
directly to 'HashMap' using TOML keys as 'HashMap' keys.
It can be convenient if your 'HashMap' keys are types like 'Text' or 'Int' and
you want to work with raw TOML keys directly.

For example, if you can write your 'HashMap' in @TOML@ like this:

@
[myHashMap]
key1 = &quot;value1&quot;
key2 = &quot;value2&quot;
@

@since 1.3.0.0
-}</span></span><span>
</span><span id="line-267"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#tableHashMap"><span class="hs-identifier hs-type">tableHashMap</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108389"><span class="annot"><a href="#local-6989586621679108389"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679108390"><span class="annot"><a href="#local-6989586621679108390"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-cpp">
#if MIN_VERSION_hashable(1,4,0)
</span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Hashable</span></span><span> </span><span class="annot"><a href="#local-6989586621679108389"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">)</span><span class="hs-cpp">
#else
</span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="hs-special">(</span><span class="hs-identifier">Eq</span><span> </span><span class="hs-identifier">k</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">Hashable</span><span> </span><span class="hs-identifier">k</span><span class="hs-special">)</span><span class="hs-cpp">
#endif
</span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.BiMap.html#TomlBiMap"><span class="hs-identifier hs-type">TomlBiMap</span></a></span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108389"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-275"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Bidirectional converter between TOML 'Key's and 'HashMap' keys</span></span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108390"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'HashMap' values for the corresponding 'Key'</span></span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Table name for 'HashMap'</span></span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HashMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679108389"><span class="hs-identifier hs-type">k</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108390"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-281"></span><span id="tableHashMap"><span class="annot"><span class="annottext">tableHashMap :: forall k v.
Hashable k =&gt;
TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v) -&gt; Key -&gt; TomlCodec (HashMap k v)
</span><a href="Toml.Codec.Combinator.Map.html#tableHashMap"><span class="hs-identifier hs-var hs-var">tableHashMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap k v
-&gt; (HashMap k v -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; HashMap k v)
-&gt; TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec (HashMap k v)
forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalTableMap"><span class="hs-identifier hs-var">internalTableMap</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap k v
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">HashMap.empty</span></span><span> </span><span class="annot"><span class="annottext">HashMap k v -&gt; [(k, v)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><span class="hs-identifier hs-var">HashMap.toList</span></span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; HashMap k v
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">HashMap.fromList</span></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="annot"><span class="hs-comment">{- | Bidirectional codec for 'IntMap'. It takes birectional converter for keys and
values and produces bidirectional codec for 'IntMap'. It works with array of
tables, so you need to specify 'IntMap's in TOML files like this:

@
myIntMap =
    [ { name = &quot;foo&quot;, payload = 42 }
    , { name = &quot;bar&quot;, payload = 69 }
    ]
@

'TomlCodec' for such TOML field can look like this:

@
Toml.'intMap' (Toml.'text' &quot;name&quot;) (Toml.'int' &quot;payload&quot;) &quot;myIntMap&quot;
@

If there's no key with the name @&quot;myIntMap&quot;@ then empty 'IntMap' is returned.

@since 1.3.0.0
-}</span></span><span>
</span><span id="line-304"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#intMap"><span class="hs-identifier hs-type">intMap</span></a></span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108393"><span class="annot"><a href="#local-6989586621679108393"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'IntMap' keys</span></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108393"><span class="hs-identifier hs-type">v</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'IntMap' values</span></span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ TOML key where 'IntMap' is stored</span></span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679108393"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for the 'IntMap'</span></span><span>
</span><span id="line-310"></span><span id="intMap"><span class="annot"><span class="annottext">intMap :: forall v.
TomlCodec Int -&gt; TomlCodec v -&gt; Key -&gt; TomlCodec (IntMap v)
</span><a href="Toml.Codec.Combinator.Map.html#intMap"><span class="hs-identifier hs-var hs-var">intMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntMap v
-&gt; (IntMap v -&gt; [(Int, v)])
-&gt; ([(Int, v)] -&gt; IntMap v)
-&gt; TomlCodec Int
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec (IntMap v)
forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlCodec k
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalMap"><span class="hs-identifier hs-var">internalMap</span></a></span><span> </span><span class="annot"><span class="annottext">IntMap v
forall a. IntMap a
</span><span class="hs-identifier hs-var">IntMap.empty</span></span><span> </span><span class="annot"><span class="annottext">IntMap v -&gt; [(Int, v)]
forall a. IntMap a -&gt; [(Int, a)]
</span><span class="hs-identifier hs-var">IntMap.toList</span></span><span> </span><span class="annot"><span class="annottext">[(Int, v)] -&gt; IntMap v
forall a. [(Int, a)] -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.fromList</span></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="annot"><span class="hs-comment">{- | This 'TomlCodec' helps to convert TOML key-value pairs
directly to 'IntMap' using TOML 'Int' keys as 'IntMap' keys.

For example, if you can write your 'IntMap' in @TOML@ like this:

@
[myIntMap]
1 = &quot;value1&quot;
2 = &quot;value2&quot;
@

@since 1.3.0.0
-}</span></span><span>
</span><span id="line-325"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#tableIntMap"><span class="hs-identifier hs-type">tableIntMap</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108399"><span class="annot"><a href="#local-6989586621679108399"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="annot"><a href="Toml.Codec.BiMap.html#TomlBiMap"><span class="hs-identifier hs-type">TomlBiMap</span></a></span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Bidirectional converter between TOML 'Key's and 'IntMap' keys</span></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108399"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Codec for 'IntMap' values for the corresponding 'Key'</span></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>
</span><span id="line-332"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Table name for 'IntMap'</span></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IntMap</span></span><span> </span><span class="annot"><a href="#local-6989586621679108399"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span id="tableIntMap"><span class="annot"><span class="annottext">tableIntMap :: forall v.
TomlBiMap Key Int
-&gt; (Key -&gt; TomlCodec v) -&gt; Key -&gt; TomlCodec (IntMap v)
</span><a href="Toml.Codec.Combinator.Map.html#tableIntMap"><span class="hs-identifier hs-var hs-var">tableIntMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntMap v
-&gt; (IntMap v -&gt; [(Int, v)])
-&gt; ([(Int, v)] -&gt; IntMap v)
-&gt; TomlBiMap Key Int
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec (IntMap v)
forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalTableMap"><span class="hs-identifier hs-var">internalTableMap</span></a></span><span> </span><span class="annot"><span class="annottext">IntMap v
forall a. IntMap a
</span><span class="hs-identifier hs-var">IntMap.empty</span></span><span> </span><span class="annot"><span class="annottext">IntMap v -&gt; [(Int, v)]
forall a. IntMap a -&gt; [(Int, a)]
</span><span class="hs-identifier hs-var">IntMap.toList</span></span><span> </span><span class="annot"><span class="annottext">[(Int, v)] -&gt; IntMap v
forall a. [(Int, a)] -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.fromList</span></span><span>
</span><span id="line-335"></span><span>
</span><span id="line-336"></span><span>
</span><span id="line-337"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-338"></span><span class="hs-comment">-- Internal</span><span>
</span><span id="line-339"></span><span class="hs-comment">----------------------------------------------------------------------------</span><span>
</span><span id="line-340"></span><span>
</span><span id="line-341"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#internalMap"><span class="hs-identifier hs-type">internalMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108359"><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span></span><span> </span><span id="local-6989586621679108360"><span class="annot"><a href="#local-6989586621679108360"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679108361"><span class="annot"><a href="#local-6989586621679108361"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ empty map</span></span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108360"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679108361"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ toList function</span></span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108360"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679108361"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ fromList function</span></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108360"><span class="hs-identifier hs-type">k</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for Map keys</span></span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108361"><span class="hs-identifier hs-type">v</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for Map values</span></span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>          </span><span class="annot"><span class="hs-comment">-- ^ TOML key where Map is stored</span></span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ Codec for the Map</span></span><span>
</span><span id="line-349"></span><span id="internalMap"><span class="annot"><span class="annottext">internalMap :: forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlCodec k
-&gt; TomlCodec v
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalMap"><span class="hs-identifier hs-var hs-var">internalMap</span></a></span></span><span> </span><span id="local-6989586621679108552"><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108552"><span class="hs-identifier hs-var">emptyMap</span></a></span></span><span> </span><span id="local-6989586621679108553"><span class="annot"><span class="annottext">map -&gt; [(k, v)]
</span><a href="#local-6989586621679108553"><span class="hs-identifier hs-var">toListMap</span></a></span></span><span> </span><span id="local-6989586621679108554"><span class="annot"><span class="annottext">[(k, v)] -&gt; map
</span><a href="#local-6989586621679108554"><span class="hs-identifier hs-var">fromListMap</span></a></span></span><span> </span><span id="local-6989586621679108555"><span class="annot"><span class="annottext">TomlCodec k
</span><a href="#local-6989586621679108555"><span class="hs-identifier hs-var">keyCodec</span></a></span></span><span> </span><span id="local-6989586621679108556"><span class="annot"><span class="annottext">TomlCodec v
</span><a href="#local-6989586621679108556"><span class="hs-identifier hs-var">valCodec</span></a></span></span><span> </span><span id="local-6989586621679108557"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TomlEnv map -&gt; (map -&gt; TomlState map) -&gt; Codec map map
forall i o. TomlEnv o -&gt; (i -&gt; TomlState o) -&gt; Codec i o
</span><a href="Toml.Codec.Types.html#Codec"><span class="hs-identifier hs-var">Codec</span></a></span><span> </span><span class="annot"><span class="annottext">TomlEnv map
</span><a href="#local-6989586621679108559"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">map -&gt; TomlState map
</span><a href="#local-6989586621679108560"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-350"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><a href="#local-6989586621679108559"><span class="hs-identifier hs-type">input</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlEnv"><span class="hs-identifier hs-type">TomlEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span id="local-6989586621679108559"><span class="annot"><span class="annottext">input :: TomlEnv map
</span><a href="#local-6989586621679108559"><span class="hs-identifier hs-var hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108561"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108561"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Key -&gt; HashMap Key (NonEmpty TOML) -&gt; Maybe (NonEmpty TOML)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">HashMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap Key (NonEmpty TOML) -&gt; Maybe (NonEmpty TOML))
-&gt; HashMap Key (NonEmpty TOML) -&gt; Maybe (NonEmpty TOML)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; HashMap Key (NonEmpty TOML)
</span><a href="Toml.Type.TOML.html#tomlTableArrays"><span class="hs-identifier hs-var">tomlTableArrays</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108561"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-353"></span><span>        </span><span class="annot"><span class="annottext">Maybe (NonEmpty TOML)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">map -&gt; Validation [TomlDecodeError] map
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108552"><span class="hs-identifier hs-var">emptyMap</span></a></span><span>
</span><span id="line-354"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679108565"><span class="annot"><span class="annottext">NonEmpty TOML
</span><a href="#local-6989586621679108565"><span class="hs-identifier hs-var">tomls</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(k, v)] -&gt; map)
-&gt; Validation [TomlDecodeError] [(k, v)]
-&gt; Validation [TomlDecodeError] map
forall a b.
(a -&gt; b)
-&gt; Validation [TomlDecodeError] a -&gt; Validation [TomlDecodeError] b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; map
</span><a href="#local-6989586621679108554"><span class="hs-identifier hs-var">fromListMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Validation [TomlDecodeError] [(k, v)]
 -&gt; Validation [TomlDecodeError] map)
-&gt; Validation [TomlDecodeError] [(k, v)]
-&gt; Validation [TomlDecodeError] map
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TOML]
-&gt; (TOML -&gt; Validation [TomlDecodeError] (k, v))
-&gt; Validation [TomlDecodeError] [(k, v)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmpty TOML -&gt; [TOML]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.toList</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty TOML
</span><a href="#local-6989586621679108565"><span class="hs-identifier hs-var">tomls</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((TOML -&gt; Validation [TomlDecodeError] (k, v))
 -&gt; Validation [TomlDecodeError] [(k, v)])
-&gt; (TOML -&gt; Validation [TomlDecodeError] (k, v))
-&gt; Validation [TomlDecodeError] [(k, v)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108567"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108567"><span class="hs-identifier hs-var">toml</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-355"></span><span>            </span><span id="local-6989586621679108568"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108568"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TomlCodec k -&gt; TomlEnv k
forall i o. Codec i o -&gt; TomlEnv o
</span><a href="Toml.Codec.Types.html#codecRead"><span class="hs-identifier hs-var">codecRead</span></a></span><span> </span><span class="annot"><span class="annottext">TomlCodec k
</span><a href="#local-6989586621679108555"><span class="hs-identifier hs-var">keyCodec</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108567"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-356"></span><span>            </span><span id="local-6989586621679108570"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679108570"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TomlCodec v -&gt; TomlEnv v
forall i o. Codec i o -&gt; TomlEnv o
</span><a href="Toml.Codec.Types.html#codecRead"><span class="hs-identifier hs-var">codecRead</span></a></span><span> </span><span class="annot"><span class="annottext">TomlCodec v
</span><a href="#local-6989586621679108556"><span class="hs-identifier hs-var">valCodec</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108567"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-357"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108568"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679108570"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span>    </span><span class="annot"><a href="#local-6989586621679108560"><span class="hs-identifier hs-type">output</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlState"><span class="hs-identifier hs-type">TomlState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108359"><span class="hs-identifier hs-type">map</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span id="local-6989586621679108560"><span class="annot"><span class="annottext">output :: map -&gt; TomlState map
</span><a href="#local-6989586621679108560"><span class="hs-identifier hs-var hs-var">output</span></a></span></span><span> </span><span id="local-6989586621679108571"><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108571"><span class="hs-identifier hs-var">dict</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-361"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679108576"><span class="annot"><span class="annottext">tomls :: [TOML]
</span><a href="#local-6989586621679108576"><span class="hs-identifier hs-var hs-var">tomls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((k, v) -&gt; TOML) -&gt; [(k, v)] -&gt; [TOML]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span>
</span><span id="line-362"></span><span>                </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679108577"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108577"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679108578"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679108578"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TomlCodec k -&gt; k -&gt; TOML
forall a. TomlCodec a -&gt; a -&gt; TOML
</span><a href="Toml.Codec.Code.html#execTomlCodec"><span class="hs-identifier hs-var">execTomlCodec</span></a></span><span> </span><span class="annot"><span class="annottext">TomlCodec k
</span><a href="#local-6989586621679108555"><span class="hs-identifier hs-var">keyCodec</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108577"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; TOML -&gt; TOML
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TomlCodec v -&gt; v -&gt; TOML
forall a. TomlCodec a -&gt; a -&gt; TOML
</span><a href="Toml.Codec.Code.html#execTomlCodec"><span class="hs-identifier hs-var">execTomlCodec</span></a></span><span> </span><span class="annot"><span class="annottext">TomlCodec v
</span><a href="#local-6989586621679108556"><span class="hs-identifier hs-var">valCodec</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679108578"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">map -&gt; [(k, v)]
</span><a href="#local-6989586621679108553"><span class="hs-identifier hs-var">toListMap</span></a></span><span> </span><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108571"><span class="hs-identifier hs-var">dict</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span>        </span><span id="local-6989586621679108579"><span class="annot"><span class="annottext">Maybe (NonEmpty TOML)
</span><a href="#local-6989586621679108579"><span class="hs-identifier hs-var">mTables</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TOML -&gt; Maybe (NonEmpty TOML))
-&gt; TomlState (Maybe (NonEmpty TOML))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">((TOML -&gt; Maybe (NonEmpty TOML))
 -&gt; TomlState (Maybe (NonEmpty TOML)))
-&gt; (TOML -&gt; Maybe (NonEmpty TOML))
-&gt; TomlState (Maybe (NonEmpty TOML))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; HashMap Key (NonEmpty TOML) -&gt; Maybe (NonEmpty TOML)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">HashMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap Key (NonEmpty TOML) -&gt; Maybe (NonEmpty TOML))
-&gt; (TOML -&gt; HashMap Key (NonEmpty TOML))
-&gt; TOML
-&gt; Maybe (NonEmpty TOML)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; HashMap Key (NonEmpty TOML)
</span><a href="Toml.Type.TOML.html#tomlTableArrays"><span class="hs-identifier hs-var">tomlTableArrays</span></a></span><span>
</span><span id="line-366"></span><span>
</span><span id="line-367"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621679108581"><span class="hs-identifier hs-type">updateAction</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Toml.Type.TOML.html#TOML"><span class="hs-identifier hs-type">TOML</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.TOML.html#TOML"><span class="hs-identifier hs-type">TOML</span></a></span><span>
</span><span id="line-368"></span><span>            </span><span id="local-6989586621679108581"><span class="annot"><span class="annottext">updateAction :: TOML -&gt; TOML
</span><a href="#local-6989586621679108581"><span class="hs-identifier hs-var hs-var">updateAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty TOML)
</span><a href="#local-6989586621679108579"><span class="hs-identifier hs-var">mTables</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-369"></span><span>                </span><span class="annot"><span class="annottext">Maybe (NonEmpty TOML)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[TOML]
</span><a href="#local-6989586621679108576"><span class="hs-identifier hs-var">tomls</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-370"></span><span>                    </span><span class="hs-special">[</span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TOML -&gt; TOML
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-371"></span><span>                    </span><span id="local-6989586621679108583"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108583"><span class="hs-identifier hs-var">t</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621679108584"><span class="annot"><span class="annottext">[TOML]
</span><a href="#local-6989586621679108584"><span class="hs-identifier hs-var">ts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Key -&gt; NonEmpty TOML -&gt; TOML -&gt; TOML
</span><a href="Toml.Type.TOML.html#insertTableArrays"><span class="hs-identifier hs-var">insertTableArrays</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108583"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; [TOML] -&gt; NonEmpty TOML
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="annot"><span class="annottext">[TOML]
</span><a href="#local-6989586621679108584"><span class="hs-identifier hs-var">ts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679108586"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108586"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621679108587"><span class="annot"><span class="annottext">[TOML]
</span><a href="#local-6989586621679108587"><span class="hs-identifier hs-var">ts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-373"></span><span>                    </span><span class="annot"><span class="annottext">Key -&gt; NonEmpty TOML -&gt; TOML -&gt; TOML
</span><a href="Toml.Type.TOML.html#insertTableArrays"><span class="hs-identifier hs-var">insertTableArrays</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108557"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">(NonEmpty TOML -&gt; TOML -&gt; TOML) -&gt; NonEmpty TOML -&gt; TOML -&gt; TOML
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108586"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; [TOML] -&gt; NonEmpty TOML
forall a. a -&gt; [a] -&gt; NonEmpty a
</span><span class="hs-operator hs-var">:|</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TOML]
</span><a href="#local-6989586621679108587"><span class="hs-identifier hs-var">ts</span></a></span><span> </span><span class="annot"><span class="annottext">[TOML] -&gt; [TOML] -&gt; [TOML]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[TOML]
</span><a href="#local-6989586621679108576"><span class="hs-identifier hs-var">tomls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span>        </span><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108571"><span class="hs-identifier hs-var">dict</span></a></span><span> </span><span class="annot"><span class="annottext">map -&gt; TomlState () -&gt; TomlState map
forall a b. a -&gt; TomlState b -&gt; TomlState a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">(TOML -&gt; TOML) -&gt; TomlState ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; TOML
</span><a href="#local-6989586621679108581"><span class="hs-identifier hs-var">updateAction</span></a></span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="annot"><a href="Toml.Codec.Combinator.Map.html#internalTableMap"><span class="hs-identifier hs-type">internalTableMap</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679108373"><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span></span><span> </span><span id="local-6989586621679108374"><span class="annot"><a href="#local-6989586621679108374"><span class="hs-identifier hs-type">k</span></a></span></span><span> </span><span id="local-6989586621679108375"><span class="annot"><a href="#local-6989586621679108375"><span class="hs-identifier hs-type">v</span></a></span></span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-operator">.</span><span>  </span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span>  </span><span class="annot"><span class="hs-comment">-- ^ empty map</span></span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108374"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679108375"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ toList function</span></span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679108374"><span class="hs-identifier hs-type">k</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679108375"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="hs-comment">-- ^ fromList function</span></span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.BiMap.html#TomlBiMap"><span class="hs-identifier hs-type">TomlBiMap</span></a></span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108374"><span class="hs-identifier hs-type">k</span></a></span><span>
</span><span id="line-383"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Bidirectional converter between TOML 'Key's and Map keys</span></span><span>
</span><span id="line-384"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108375"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Codec for Map values for the corresponding 'Key'</span></span><span>
</span><span id="line-386"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Type.Key.html#Key"><span class="hs-identifier hs-type">Key</span></a></span><span>
</span><span id="line-387"></span><span>    </span><span class="annot"><span class="hs-comment">-- ^ Table name for Map</span></span><span>
</span><span id="line-388"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlCodec"><span class="hs-identifier hs-type">TomlCodec</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span>
</span><span id="line-389"></span><span id="internalTableMap"><span class="annot"><span class="annottext">internalTableMap :: forall map k v.
map
-&gt; (map -&gt; [(k, v)])
-&gt; ([(k, v)] -&gt; map)
-&gt; TomlBiMap Key k
-&gt; (Key -&gt; TomlCodec v)
-&gt; Key
-&gt; TomlCodec map
</span><a href="Toml.Codec.Combinator.Map.html#internalTableMap"><span class="hs-identifier hs-var hs-var">internalTableMap</span></a></span></span><span> </span><span id="local-6989586621679108606"><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108606"><span class="hs-identifier hs-var">emptyMap</span></a></span></span><span> </span><span id="local-6989586621679108607"><span class="annot"><span class="annottext">map -&gt; [(k, v)]
</span><a href="#local-6989586621679108607"><span class="hs-identifier hs-var">toListMap</span></a></span></span><span> </span><span id="local-6989586621679108608"><span class="annot"><span class="annottext">[(k, v)] -&gt; map
</span><a href="#local-6989586621679108608"><span class="hs-identifier hs-var">fromListMap</span></a></span></span><span> </span><span id="local-6989586621679108609"><span class="annot"><span class="annottext">TomlBiMap Key k
</span><a href="#local-6989586621679108609"><span class="hs-identifier hs-var">keyBiMap</span></a></span></span><span> </span><span id="local-6989586621679108610"><span class="annot"><span class="annottext">Key -&gt; TomlCodec v
</span><a href="#local-6989586621679108610"><span class="hs-identifier hs-var">valCodec</span></a></span></span><span> </span><span id="local-6989586621679108611"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108611"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-390"></span><span>    </span><span class="annot"><span class="annottext">TomlEnv map -&gt; (map -&gt; TomlState map) -&gt; Codec map map
forall i o. TomlEnv o -&gt; (i -&gt; TomlState o) -&gt; Codec i o
</span><a href="Toml.Codec.Types.html#Codec"><span class="hs-identifier hs-var">Codec</span></a></span><span> </span><span class="annot"><span class="annottext">TomlEnv map
</span><a href="#local-6989586621679108612"><span class="hs-identifier hs-var">input</span></a></span><span> </span><span class="annot"><span class="annottext">map -&gt; TomlState map
</span><a href="#local-6989586621679108613"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><a href="#local-6989586621679108612"><span class="hs-identifier hs-type">input</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlEnv"><span class="hs-identifier hs-type">TomlEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span id="local-6989586621679108612"><span class="annot"><span class="annottext">input :: TomlEnv map
</span><a href="#local-6989586621679108612"><span class="hs-identifier hs-var hs-var">input</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108614"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108614"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Key -&gt; PrefixMap TOML -&gt; Maybe TOML
forall a. Key -&gt; PrefixMap a -&gt; Maybe a
</span><a href="Toml.Type.PrefixTree.html#lookup"><span class="hs-identifier hs-var">Prefix.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108611"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">(PrefixMap TOML -&gt; Maybe TOML) -&gt; PrefixMap TOML -&gt; Maybe TOML
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; PrefixMap TOML
</span><a href="Toml.Type.TOML.html#tomlTables"><span class="hs-identifier hs-var">tomlTables</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108614"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><span class="annottext">Maybe TOML
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">map -&gt; Validation [TomlDecodeError] map
forall e a. a -&gt; Validation e a
</span><span class="hs-identifier hs-var">Success</span></span><span> </span><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108606"><span class="hs-identifier hs-var">emptyMap</span></a></span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679108617"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108617"><span class="hs-identifier hs-var">toml</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-396"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679108618"><span class="annot"><span class="annottext">valKeys :: [Key]
</span><a href="#local-6989586621679108618"><span class="hs-identifier hs-var hs-var">valKeys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap Key AnyValue -&gt; [Key]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">HashMap.keys</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Key AnyValue -&gt; [Key]) -&gt; HashMap Key AnyValue -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; HashMap Key AnyValue
</span><a href="Toml.Type.TOML.html#tomlPairs"><span class="hs-identifier hs-var">tomlPairs</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108617"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-397"></span><span>                </span><span id="local-6989586621679108622"><span class="annot"><span class="annottext">tableKeys :: [Key]
</span><a href="#local-6989586621679108622"><span class="hs-identifier hs-var hs-var">tableKeys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Piece -&gt; Key) -&gt; [Piece] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Piece -&gt; [Piece] -&gt; Key
</span><a href="Toml.Type.Key.html#%3A%7C%7C"><span class="hs-operator hs-var">:||</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Piece] -&gt; [Key]) -&gt; [Piece] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrefixMap TOML -&gt; [Piece]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">HashMap.keys</span></span><span> </span><span class="annot"><span class="annottext">(PrefixMap TOML -&gt; [Piece]) -&gt; PrefixMap TOML -&gt; [Piece]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; PrefixMap TOML
</span><a href="Toml.Type.TOML.html#tomlTables"><span class="hs-identifier hs-var">tomlTables</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108617"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-398"></span><span>                </span><span id="local-6989586621679108623"><span class="annot"><span class="annottext">tableArrayKey :: [Key]
</span><a href="#local-6989586621679108623"><span class="hs-identifier hs-var hs-var">tableArrayKey</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap Key (NonEmpty TOML) -&gt; [Key]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">HashMap.keys</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Key (NonEmpty TOML) -&gt; [Key])
-&gt; HashMap Key (NonEmpty TOML) -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; HashMap Key (NonEmpty TOML)
</span><a href="Toml.Type.TOML.html#tomlTableArrays"><span class="hs-identifier hs-var">tomlTableArrays</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108617"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-399"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">([(k, v)] -&gt; map)
-&gt; Validation [TomlDecodeError] [(k, v)]
-&gt; Validation [TomlDecodeError] map
forall a b.
(a -&gt; b)
-&gt; Validation [TomlDecodeError] a -&gt; Validation [TomlDecodeError] b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; map
</span><a href="#local-6989586621679108608"><span class="hs-identifier hs-var">fromListMap</span></a></span><span> </span><span class="annot"><span class="annottext">(Validation [TomlDecodeError] [(k, v)]
 -&gt; Validation [TomlDecodeError] map)
-&gt; Validation [TomlDecodeError] [(k, v)]
-&gt; Validation [TomlDecodeError] map
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Key]
-&gt; (Key -&gt; Validation [TomlDecodeError] (k, v))
-&gt; Validation [TomlDecodeError] [(k, v)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Key]
</span><a href="#local-6989586621679108618"><span class="hs-identifier hs-var">valKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[Key] -&gt; [Key] -&gt; [Key]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Key]
</span><a href="#local-6989586621679108622"><span class="hs-identifier hs-var">tableKeys</span></a></span><span> </span><span class="annot"><span class="annottext">[Key] -&gt; [Key] -&gt; [Key]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Key]
</span><a href="#local-6989586621679108623"><span class="hs-identifier hs-var">tableArrayKey</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Key -&gt; Validation [TomlDecodeError] (k, v))
 -&gt; Validation [TomlDecodeError] [(k, v)])
-&gt; (Key -&gt; Validation [TomlDecodeError] (k, v))
-&gt; Validation [TomlDecodeError] [(k, v)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108624"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108624"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-400"></span><span>                </span><span class="annot"><span class="annottext">Key
-&gt; Either TomlBiMapError k
-&gt; (k -&gt; Validation [TomlDecodeError] (k, v))
-&gt; Validation [TomlDecodeError] (k, v)
forall a b.
Key
-&gt; Either TomlBiMapError a
-&gt; (a -&gt; Validation [TomlDecodeError] b)
-&gt; Validation [TomlDecodeError] b
</span><a href="Toml.Codec.Combinator.Common.html#whenLeftBiMapError"><span class="hs-identifier hs-var">whenLeftBiMapError</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108624"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TomlBiMap Key k -&gt; Key -&gt; Either TomlBiMapError k
forall e a b. BiMap e a b -&gt; a -&gt; Either e b
</span><a href="Toml.Codec.BiMap.html#forward"><span class="hs-identifier hs-var">forward</span></a></span><span> </span><span class="annot"><span class="annottext">TomlBiMap Key k
</span><a href="#local-6989586621679108609"><span class="hs-identifier hs-var">keyBiMap</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108624"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((k -&gt; Validation [TomlDecodeError] (k, v))
 -&gt; Validation [TomlDecodeError] (k, v))
-&gt; (k -&gt; Validation [TomlDecodeError] (k, v))
-&gt; Validation [TomlDecodeError] (k, v)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679108626"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108626"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-401"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108626"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(v -&gt; (k, v))
-&gt; Validation [TomlDecodeError] v
-&gt; Validation [TomlDecodeError] (k, v)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TomlCodec v -&gt; TomlEnv v
forall i o. Codec i o -&gt; TomlEnv o
</span><a href="Toml.Codec.Types.html#codecRead"><span class="hs-identifier hs-var">codecRead</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; TomlCodec v
</span><a href="#local-6989586621679108610"><span class="hs-identifier hs-var">valCodec</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108624"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108617"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span>    </span><span class="annot"><a href="#local-6989586621679108613"><span class="hs-identifier hs-type">output</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlState"><span class="hs-identifier hs-type">TomlState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679108373"><span class="hs-identifier hs-type">map</span></a></span><span>
</span><span id="line-404"></span><span>    </span><span id="local-6989586621679108613"><span class="annot"><span class="annottext">output :: map -&gt; TomlState map
</span><a href="#local-6989586621679108613"><span class="hs-identifier hs-var hs-var">output</span></a></span></span><span> </span><span id="local-6989586621679108628"><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108628"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-405"></span><span>        </span><span id="local-6989586621679108629"><span class="annot"><span class="annottext">Maybe TOML
</span><a href="#local-6989586621679108629"><span class="hs-identifier hs-var">mTable</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TOML -&gt; Maybe TOML) -&gt; TomlState (Maybe TOML)
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">((TOML -&gt; Maybe TOML) -&gt; TomlState (Maybe TOML))
-&gt; (TOML -&gt; Maybe TOML) -&gt; TomlState (Maybe TOML)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; PrefixMap TOML -&gt; Maybe TOML
forall a. Key -&gt; PrefixMap a -&gt; Maybe a
</span><a href="Toml.Type.PrefixTree.html#lookup"><span class="hs-identifier hs-var">Prefix.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108611"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">(PrefixMap TOML -&gt; Maybe TOML)
-&gt; (TOML -&gt; PrefixMap TOML) -&gt; TOML -&gt; Maybe TOML
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TOML -&gt; PrefixMap TOML
</span><a href="Toml.Type.TOML.html#tomlTables"><span class="hs-identifier hs-var">tomlTables</span></a></span><span>
</span><span id="line-406"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679108632"><span class="annot"><span class="annottext">toml :: TOML
</span><a href="#local-6989586621679108632"><span class="hs-identifier hs-var hs-var">toml</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TOML -&gt; Maybe TOML -&gt; TOML
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">TOML
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">Maybe TOML
</span><a href="#local-6989586621679108629"><span class="hs-identifier hs-var">mTable</span></a></span><span>
</span><span id="line-407"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ()
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679108633"><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108633"><span class="hs-identifier hs-var">newToml</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TomlState () -&gt; TOML -&gt; (Maybe (), TOML)
forall a. TomlState a -&gt; TOML -&gt; (Maybe a, TOML)
</span><a href="Toml.Codec.Types.html#unTomlState"><span class="hs-identifier hs-var">unTomlState</span></a></span><span> </span><span class="annot"><span class="annottext">TomlState ()
</span><a href="#local-6989586621679108635"><span class="hs-identifier hs-var">updateMapTable</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108632"><span class="hs-identifier hs-var">toml</span></a></span><span>
</span><span id="line-408"></span><span>        </span><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108628"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">map -&gt; TomlState () -&gt; TomlState map
forall a b. a -&gt; TomlState b -&gt; TomlState a
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">(TOML -&gt; TOML) -&gt; TomlState ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; TOML -&gt; TOML -&gt; TOML
</span><a href="Toml.Type.TOML.html#insertTable"><span class="hs-identifier hs-var">insertTable</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108611"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">TOML
</span><a href="#local-6989586621679108633"><span class="hs-identifier hs-var">newToml</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-410"></span><span>        </span><span class="annot"><a href="#local-6989586621679108635"><span class="hs-identifier hs-type">updateMapTable</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Toml.Codec.Types.html#TomlState"><span class="hs-identifier hs-type">TomlState</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>        </span><span id="local-6989586621679108635"><span class="annot"><span class="annottext">updateMapTable :: TomlState ()
</span><a href="#local-6989586621679108635"><span class="hs-identifier hs-var hs-var">updateMapTable</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(k, v)] -&gt; ((k, v) -&gt; TomlState v) -&gt; TomlState ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">map -&gt; [(k, v)]
</span><a href="#local-6989586621679108607"><span class="hs-identifier hs-var">toListMap</span></a></span><span> </span><span class="annot"><span class="annottext">map
</span><a href="#local-6989586621679108628"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((k, v) -&gt; TomlState v) -&gt; TomlState ())
-&gt; ((k, v) -&gt; TomlState v) -&gt; TomlState ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679108636"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108636"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679108637"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679108637"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TomlBiMap Key k -&gt; k -&gt; Either TomlBiMapError Key
forall e a b. BiMap e a b -&gt; b -&gt; Either e a
</span><a href="Toml.Codec.BiMap.html#backward"><span class="hs-identifier hs-var">backward</span></a></span><span> </span><span class="annot"><span class="annottext">TomlBiMap Key k
</span><a href="#local-6989586621679108609"><span class="hs-identifier hs-var">keyBiMap</span></a></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621679108636"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-412"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">TomlBiMapError
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TomlState v
forall a. TomlState a
forall (f :: * -&gt; *) a. Alternative f =&gt; f a
</span><span class="hs-identifier hs-var">empty</span></span><span>
</span><span id="line-413"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679108639"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108639"><span class="hs-identifier hs-var">key</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TomlCodec v -&gt; v -&gt; TomlState v
forall i o. Codec i o -&gt; i -&gt; TomlState o
</span><a href="Toml.Codec.Types.html#codecWrite"><span class="hs-identifier hs-var">codecWrite</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; TomlCodec v
</span><a href="#local-6989586621679108610"><span class="hs-identifier hs-var">valCodec</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621679108639"><span class="hs-identifier hs-var">key</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621679108637"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-414"></span></pre></body></html>